<div id="login-form">
    <h2>Login</h2>
    <hr>

    <form 
      #loginForm = "ngForm" 
      (ngSubmit)="onSubmit(this.user)"
    >

        <div class="form-group">
          <label>Username*</label>
          <input 
            type="text" 
            [(ngModel)]="this.user.username"
            #username = "ngModel"
            [ngClass]="{
              'is-invalid': 
                username.errors && 
                username.touched
            }"
            class="form-control"
            placeholder="Username" 
            name="username"
            required
            pattern="^[a-zA-Z0-9_]+$"
            autofocus
          >
          <div 
            [hidden]="!username.errors?.required" 
            class="invalid-feedback"
          > Username is required </div>
          <div 
            [hidden]="!username.errors?.pattern" 
            class="invalid-feedback"
          >
            "Username should be 3 to 30 characters long 
            and only contains letters(a-z, A-Z), 
            digits(0-9) and underscore(_)."
          </div>
        </div>

        <div class="form-group">
          <label for="password">Password*</label>
          <input 
            type="password" 
            [(ngModel)]="this.user.password"
            #password = "ngModel"
            [ngClass]="{
              'is-invalid': 
                password.errors && 
                password.touched
            }"
            class="form-control" 
            placeholder="Password" 
            name="password"
            required
          >
          <div 
            [hidden]="!password.errors?.required" 
            class="invalid-feedback"
          > Password is required </div>
        </div>

        <button 
          class="btn btn-primary" 
          [disabled]="!loginForm.form.valid || loading"
        >
          Login
          <span 
            class="spinner-border spinner-border-sm" 
            role="status" 
            aria-hidden="true"
            *ngIf="this.loading"
          ></span>
        </button>

        <a routerLink="/register" class="btn">Register</a> 
    </form>
</div>